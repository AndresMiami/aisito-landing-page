<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Miami Concierge Event Flow Diagram</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }
    
    h1 {
      text-align: center;
      color: white;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 30px;
    }
    
    .miami-logo {
      text-align: center;
      color: white;
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    
    .miami-logo .heart {
      color: #ff4757;
      font-size: 1.5rem;
    }
    
    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
    }
    
    .diagram-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      overflow-x: auto;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .event-flow {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0;
      min-width: 800px;
    }
    
    .component-row {
      display: flex;
      justify-content: space-around;
      width: 100%;
      margin-bottom: 20px;
      align-items: center;
    }
    
    .component {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border: 2px solid #2196f3;
      border-radius: 12px;
      padding: 15px;
      width: 150px;
      text-align: center;
      font-weight: bold;
      position: relative;
      box-shadow: 0 4px 15px rgba(33, 150, 243, 0.2);
      transition: transform 0.3s ease;
    }
    
    .component:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
    }
    
    .component.error {
      background: linear-gradient(135deg, #ffcdd2 0%, #f8bbd9 100%);
      border-color: #f44336;
    }
    
    .component.form {
      background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
      border-color: #4caf50;
    }
    
    .component.map {
      background: linear-gradient(135deg, #bbdefb 0%, #90caf9 100%);
      border-color: #2196f3;
    }
    
    .component.analytics {
      background: linear-gradient(135deg, #e1bee7 0%, #ce93d8 100%);
      border-color: #9c27b0;
    }
    
    .event-bus {
      background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
      border: 3px solid #ffc107;
      border-radius: 16px;
      padding: 20px;
      width: 80%;
      text-align: center;
      font-weight: bold;
      font-size: 1.2rem;
      margin: 40px 0;
      position: relative;
      box-shadow: 0 6px 25px rgba(255, 193, 7, 0.3);
    }
    
    .arrow {
      position: absolute;
      width: 3px;
      background: linear-gradient(to bottom, #757575, #424242);
      z-index: 1;
      border-radius: 2px;
    }
    
    .arrow-down {
      height: 35px;
      bottom: -35px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .arrow-up {
      height: 35px;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .arrow::after {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
    }
    
    .arrow-down::after {
      border-top: 8px solid #424242;
      bottom: 0;
      left: -5px;
    }
    
    .arrow-up::after {
      border-bottom: 8px solid #424242;
      top: 0;
      left: -5px;
    }
    
    .event-label {
      position: absolute;
      font-size: 11px;
      background: rgba(255, 255, 255, 0.95);
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid #e0e0e0;
      z-index: 2;
      font-weight: 600;
      color: #333;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(5px);
    }
    
    .event-down {
      bottom: -30px;
      left: 60%;
      transform: translateX(-50%);
    }
    
    .event-up {
      top: -30px;
      left: 60%;
      transform: translateX(-50%);
    }
    
    .legend {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: white;
      font-weight: 600;
    }
    
    .legend-color {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .error-color {
      background: linear-gradient(135deg, #ffcdd2 0%, #f8bbd9 100%);
      border: 2px solid #f44336;
    }
    
    .form-color {
      background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
      border: 2px solid #4caf50;
    }
    
    .map-color {
      background: linear-gradient(135deg, #bbdefb 0%, #90caf9 100%);
      border: 2px solid #2196f3;
    }
    
    .analytics-color {
      background: linear-gradient(135deg, #e1bee7 0%, #ce93d8 100%);
      border: 2px solid #9c27b0;
    }
    
    .tabs {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .tab {
      padding: 12px 24px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      cursor: pointer;
      color: white;
      font-weight: 600;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .tab:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }
    
    .tab.active {
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .diagram {
      display: none;
    }
    
    .diagram.active {
      display: block;
    }
    
    .flow-description {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .step {
      margin: 10px 0;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      border-left: 4px solid #ffc107;
    }
    
    .sequence-diagram {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 12px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="miami-logo">
    I <span class="heart">‚ù§Ô∏è</span> Miami AI Concierge - Event Architecture
  </div>
  
  <h1>üîÑ Event Flow Diagrams</h1>
  
  <div class="tabs">
    <div class="tab active" data-target="form-submission">üìù Form Submission</div>
    <div class="tab" data-target="location-selection">üó∫Ô∏è Location Selection</div>
    <div class="tab" data-target="error-handling">üö® Error Handling</div>
    <div class="tab" data-target="validation-flow">‚úÖ Validation Flow</div>
  </div>
  
  <div id="form-submission" class="diagram active">
    <div class="flow-description">
      <h3>üìù Form Submission Event Flow</h3>
      <div class="step">1. User fills out form and clicks submit</div>
      <div class="step">2. Form data is processed and validated</div>
      <div class="step">3. Events are emitted to update UI and track analytics</div>
      <div class="step">4. Data is submitted to server with loading states</div>
      <div class="step">5. Success/error handling updates the interface</div>
    </div>
    
    <div class="diagram-container">
      <div class="event-flow">
        <div class="component-row">
          <div class="component form">
            User Input
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:submission:started</div>
          </div>
          
          <div class="component form">
            Data Processing
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:data:processed</div>
          </div>
          
          <div class="component">
            Loading State
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:loading:started</div>
          </div>
          
          <div class="component">
            Server Submit
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:submission:succeeded</div>
          </div>
        </div>
        
        <div class="event-bus">
          üöå EventBus Hub
          <br><small>All events flow through here</small>
        </div>
        
        <div class="component-row">
          <div class="component error">
            Error Handling
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">error:show</div>
          </div>
          
          <div class="component">
            UI Updates
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">form:loading:ended</div>
          </div>
          
          <div class="component analytics">
            Analytics
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">analytics:track</div>
          </div>
          
          <div class="component">
            Event Monitor
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">All Events</div>
          </div>
        </div>
      </div>
      
      <div class="sequence-diagram">
        <strong>Sequence Diagram:</strong><br>
        User ‚Üí FormSubmission: submit()<br>
        FormSubmission ‚Üí EventBus: emit('form:submission:started')<br>
        FormSubmission ‚Üí EventBus: emit('form:loading:started')<br>
        FormSubmission ‚Üí Server: POST /submit<br>
        Server ‚Üí FormSubmission: response<br>
        FormSubmission ‚Üí EventBus: emit('form:submission:succeeded')<br>
        EventBus ‚Üí Analytics: track('form_submitted')<br>
        EventBus ‚Üí UI: hideLoadingState()<br>
        EventBus ‚Üí EventMonitor: logEvent()
      </div>
    </div>
  </div>
  
  <div id="location-selection" class="diagram">
    <div class="flow-description">
      <h3>üó∫Ô∏è Location Selection Event Flow</h3>
      <div class="step">1. User types in location field</div>
      <div class="step">2. Google Places autocomplete activates</div>
      <div class="step">3. User selects a location from dropdown</div>
      <div class="step">4. Location data is validated and form updated</div>
      <div class="step">5. Errors are cleared and UI state updated</div>
    </div>
    
    <div class="diagram-container">
      <div class="event-flow">
        <div class="component-row">
          <div class="component">
            User Input
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">map:autocomplete:initialized</div>
          </div>
          
          <div class="component map">
            Google Places
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">map:places:suggestions</div>
          </div>
          
          <div class="component map">
            Location Select
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">map:location:selected</div>
          </div>
        </div>
        
        <div class="event-bus">
          üöå EventBus Hub
          <br><small>Location events coordinated here</small>
        </div>
        
        <div class="component-row">
          <div class="component">
            Validation
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">location:validation-required</div>
          </div>
          
          <div class="component form">
            Form Update
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">form:field:updated</div>
          </div>
          
          <div class="component error">
            Clear Errors
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">error:clear</div>
          </div>
          
          <div class="component analytics">
            Track Selection
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">analytics:location-selected</div>
          </div>
        </div>
      </div>
      
      <div class="sequence-diagram">
        <strong>Sequence Diagram:</strong><br>
        User ‚Üí LocationField: type("Miami Beach")<br>
        LocationField ‚Üí GooglePlaces: initAutocomplete()<br>
        GooglePlaces ‚Üí EventBus: emit('map:autocomplete:initialized')<br>
        User ‚Üí GooglePlaces: selectPlace()<br>
        GooglePlaces ‚Üí EventBus: emit('map:location:selected', placeData)<br>
        EventBus ‚Üí Validation: validateLocation()<br>
        EventBus ‚Üí FormField: updateValue()<br>
        EventBus ‚Üí ErrorHandler: clearFieldError()<br>
        EventBus ‚Üí Analytics: track('location_selected')
      </div>
    </div>
  </div>
  
  <div id="error-handling" class="diagram">
    <div class="flow-description">
      <h3>üö® Error Handling Event Flow</h3>
      <div class="step">1. Validation detects an error condition</div>
      <div class="step">2. Error event is emitted with details</div>
      <div class="step">3. Error handler displays appropriate message</div>
      <div class="step">4. Analytics tracks error for improvement</div>
      <div class="step">5. User corrects issue and error is cleared</div>
    </div>
    
    <div class="diagram-container">
      <div class="event-flow">
        <div class="component-row">
          <div class="component">
            Validation
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:field:validated</div>
          </div>
          
          <div class="component error">
            Error Detection
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">error:show</div>
          </div>
          
          <div class="component error">
            Error Display
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">error:displayed</div>
          </div>
        </div>
        
        <div class="event-bus">
          üöå EventBus Hub
          <br><small>Error coordination center</small>
        </div>
        
        <div class="component-row">
          <div class="component form">
            Form State
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">form:validation-state-changed</div>
          </div>
          
          <div class="component analytics">
            Error Analytics
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">analytics:error-tracked</div>
          </div>
          
          <div class="component">
            UI Updates
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">ui:error-shown</div>
          </div>
          
          <div class="component">
            Event Monitor
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">monitor:error-logged</div>
          </div>
        </div>
      </div>
      
      <div class="sequence-diagram">
        <strong>Sequence Diagram:</strong><br>
        Validation ‚Üí EventBus: emit('form:field:validated', {isValid: false})<br>
        EventBus ‚Üí ErrorHandler: showError(field, message)<br>
        ErrorHandler ‚Üí DOM: displayErrorMessage()<br>
        ErrorHandler ‚Üí EventBus: emit('error:displayed')<br>
        EventBus ‚Üí Analytics: trackError(errorType)<br>
        EventBus ‚Üí FormState: setFieldInvalid()<br>
        User ‚Üí Field: correctInput()<br>
        Validation ‚Üí EventBus: emit('error:clear')<br>
        EventBus ‚Üí ErrorHandler: hideError()
      </div>
    </div>
  </div>
  
  <div id="validation-flow" class="diagram">
    <div class="flow-description">
      <h3>‚úÖ Validation Event Flow</h3>
      <div class="step">1. User interaction triggers validation check</div>
      <div class="step">2. Validation rules are applied to field data</div>
      <div class="step">3. Validation result events are emitted</div>
      <div class="step">4. UI updates based on validation state</div>
      <div class="step">5. Form state is updated for submission readiness</div>
    </div>
    
    <div class="diagram-container">
      <div class="event-flow">
        <div class="component-row">
          <div class="component">
            User Input
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">form:field:changed</div>
          </div>
          
          <div class="component">
            Validation Rules
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">validation:rule:applied</div>
          </div>
          
          <div class="component">
            Validation Result
            <div class="arrow arrow-down"></div>
            <div class="event-label event-down">validation:completed</div>
          </div>
        </div>
        
        <div class="event-bus">
          üöå EventBus Hub
          <br><small>Validation event coordination</small>
        </div>
        
        <div class="component-row">
          <div class="component error">
            Error Display
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">error:show/clear</div>
          </div>
          
          <div class="component form">
            Form State
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">form:field:valid/invalid</div>
          </div>
          
          <div class="component">
            UI Feedback
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">ui:field:styled</div>
          </div>
          
          <div class="component">
            Submit Button
            <div class="arrow arrow-up"></div>
            <div class="event-label event-up">form:submit:enabled/disabled</div>
          </div>
        </div>
      </div>
      
      <div class="sequence-diagram">
        <strong>Sequence Diagram:</strong><br>
        User ‚Üí FormField: input("test@email")<br>
        FormField ‚Üí EventBus: emit('form:field:changed', {field: 'email', value: 'test@email'})<br>
        EventBus ‚Üí Validator: validateEmail('test@email')<br>
        Validator ‚Üí EventBus: emit('validation:completed', {field: 'email', isValid: false, error: 'Invalid email'})<br>
        EventBus ‚Üí ErrorHandler: showError('email', 'Invalid email')<br>
        EventBus ‚Üí FormState: setFieldInvalid('email')<br>
        EventBus ‚Üí SubmitButton: updateState(disabled)<br>
        EventBus ‚Üí UI: addErrorStyling('email')
      </div>
    </div>
  </div>
  
  <div class="legend">
    <div class="legend-item">
      <div class="legend-color error-color"></div>
      <span>üö® Error Events</span>
    </div>
    
    <div class="legend-item">
      <div class="legend-color form-color"></div>
      <span>üìù Form Events</span>
    </div>
    
    <div class="legend-item">
      <div class="legend-color map-color"></div>
      <span>üó∫Ô∏è Map Events</span>
    </div>
    
    <div class="legend-item">
      <div class="legend-color analytics-color"></div>
      <span>üìä Analytics Events</span>
    </div>
  </div>
  
  <script>
    // Tab switching functionality
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs and diagrams
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.diagram').forEach(d => d.classList.remove('active'));
        
        // Add active class to clicked tab
        tab.classList.add('active');
        
        // Show corresponding diagram
        const targetId = tab.dataset.target;
        document.getElementById(targetId).classList.add('active');
      });
    });
    
    // Add hover effects to components
    document.querySelectorAll('.component').forEach(component => {
      component.addEventListener('mouseenter', () => {
        const eventLabel = component.querySelector('.event-label');
        if (eventLabel) {
          eventLabel.style.transform = 'translateX(-50%) scale(1.1)';
          eventLabel.style.fontWeight = 'bold';
        }
      });
      
      component.addEventListener('mouseleave', () => {
        const eventLabel = component.querySelector('.event-label');
        if (eventLabel) {
          eventLabel.style.transform = 'translateX(-50%) scale(1)';
          eventLabel.style.fontWeight = '600';
        }
      });
    });
  </script>
</body>
</html>